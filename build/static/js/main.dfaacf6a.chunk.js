(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,a){},203:function(e,t,a){},205:function(e,t,a){},207:function(e,t,a){},209:function(e,t,a){},211:function(e,t,a){},213:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(76),c=a.n(r),l=a(19),s=a(20),i=a(218),d=(a(85),a(87),a(38)),u=a(4),m=a(5),f=a(7),h=a(6),p=a(8),v=a(216),N=a(96),E=a(10),b=a(217),g=a(79),y=a(27);a(91);function j(e){e.tag,e.className,e.childrenm;var t=Object(y.a)(e,["tag","className","childrenm"]);return o.a.createElement(e.tag,Object(g.a)({className:["NavCircleButton",e.className].join(" ")},t),e.children)}j.defaultProps={tag:"a"};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})},O=o.a.createContext({folders:[],notes:[],createNewFolder:function(){},createNewNote:function(){}}),w=(a(93),function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.context,t=e.folders,a=e.notes;return o.a.createElement("div",{className:"NoteListNav"},o.a.createElement("ul",{className:"NoteListNav__list"},t.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(b.a,{className:"NoteListNav__folder-link",to:"/folder/".concat(e.id)},o.a.createElement("span",{className:"NoteListNav__num-notes"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){return e.folderId===t}).length}(a,e.id)),e.name))})),o.a.createElement("div",{className:"NoteListNav__button-wrapper"},o.a.createElement(j,{tag:N.a,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button"},o.a.createElement(E.a,{icon:"plus"}),o.a.createElement("br",null),"Folder")))}}]),t}(o.a.Component));w.contextType=O,w.defaultProps={folders:[]};a(97);var _=function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.context,a=t.folders,n=t.notes,r=this.props.match.params.noteId,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})}(a,(k(n,r)||{}).folderId);return o.a.createElement("div",{className:"NotePageNav"},o.a.createElement(j,{tag:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"NotePageNav__back-button"},o.a.createElement(E.a,{icon:"chevron-left"}),o.a.createElement("br",null),"Back"),c&&o.a.createElement("h3",{className:"NotePageNav__folder-name"},c.name))}}]),t}(o.a.Component);_.contextType=O,_.defaultProps={history:{goBack:function(){}}};var C=a(78);a(201);function I(e){return o.a.createElement("div",{className:"Note"},o.a.createElement("h2",{className:"Note__title"},o.a.createElement(N.a,{to:"/note/".concat(e.id)},e.name)),o.a.createElement("button",{className:"Note__delete",type:"button",onClick:function(){e.onDeleteClick(e.id)}},o.a.createElement(E.a,{icon:"trash-alt"})," ","remove"),o.a.createElement("div",{className:"Note__dates"},o.a.createElement("div",{className:"Note__dates-modified"},"Modified"," ",o.a.createElement("span",{className:"Date"},Object(C.format)(e.modified,"Do MMM YYYY")))))}a(203);var M=o.a.createContext({folders:[],notes:[],onDeleteClick:function(){}}),P=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).deleteWithoutRedirect=function(e){a.context.onDeleteClick(e)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this;this.props.match.params.folderId&&(e=this.props.match.params.folderId);var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter(function(e){return e.folderId===t}):e}(this.context.notes,e);return o.a.createElement("section",{className:"NoteListMain"},o.a.createElement("ul",null,a.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(I,{id:e.id,name:e.name,modified:e.modified,onDeleteClick:function(e){t.deleteWithoutRedirect(e)}}))})),o.a.createElement("div",{className:"NoteListMain__button-container"},o.a.createElement(j,{tag:N.a,to:"/add-note",type:"button",className:"NoteListMain__add-note-button"},o.a.createElement(E.a,{icon:"plus"}),o.a.createElement("br",null),"Note")))}}]),t}(o.a.Component);P.contextType=M,P.defaultProps={notes:[]};a(205);var S=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).deleteAndRedirect=function(e){a.context.onDeleteClick(e).then(function(){a.props.history.goBack()})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=k(this.context.notes,this.props.match.params.noteId);return t?o.a.createElement("section",{className:"NotePageMain"},o.a.createElement(I,{id:this.props.match.params.noteId,name:t.name,modified:t.modified,onDeleteClick:function(t){e.deleteAndRedirect(t)}}),o.a.createElement("div",{className:"NotePageMain__content"},t.content.split(/\n \r|\n/).map(function(e,t){return o.a.createElement("p",{key:t},e)}))):o.a.createElement("section",{className:"NotePageMain"})}}]),t}(o.a.Component);S.contextType=M,S.defaultProps={note:{content:""}};a(207);function x(e){var t=e.className,a=Object(y.a)(e,["className"]);return o.a.createElement("form",Object.assign({className:["Noteful-form",t].join(" "),action:"#"},a))}a(209);var F=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={folderName:"",folderNameValid:!1,formValid:!1,errorMessages:{}},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"validateName",value:function(e){e.target.value.length>=4?this.setState({folderNameValid:!0,folderName:e.target.value,errorMessages:{folderName:null}}):this.setState({folderNameValid:!1,folderName:e.target.value,errorMessages:{folderName:"Folder name must be greater than 3 characters"}})}},{key:"validateForm",value:function(e){var t=this;e.preventDefault(),this.state.folderNameValid?(this.setState({formValid:!0},function(){t.context.createNewFolder(t.state)}),this.props.history.goBack()):this.setState({formValid:!1})}},{key:"render",value:function(){throw new Error("test")}}]),t}(n.Component);F.contextType=O;a(211);var V=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).updateName=function(e){var t=!0,n=null;e.target.value.length<3&&(t=!1,n="Name must be greater than 2 characters in length"),"foobar"===e.target.value&&(t=!1,n='Name must not be "foobar"'),a.setState({name:e.target.value,nameValid:t,errorMessages:{name:n}})},a.updateContent=function(e){var t=!0,n=null;e.target.value.length<5&&(t=!1,n="Content must be greater than 5 characters in length"),"foobar"===e.target.value&&(t=!1,n='Content must not be "foobar"'),a.setState({content:e.target.value,contentValid:t,errorMessages:{content:n}})},a.updateFolderId=function(e){var t=!0,n=null;"..."===e.target.value&&(t=!1,n="Please choose a folder"),a.setState({folderId:e.target.value,folderIdValid:t,errorMessages:{folderId:n}})},a.handleSubmit=function(e){e.preventDefault(),a.state.nameValid&&a.state.contentValid&&a.state.folderIdValid?(a.setState({formValid:!0}),a.context.createNewNote({name:a.state.name,content:a.state.content,folderId:a.state.folderId}),a.props.history.goBack()):a.setState({formValid:!1})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.context.folders;return o.a.createElement("section",{className:"AddNote"},o.a.createElement("h2",null,"Create a note"),o.a.createElement(x,{onSubmit:function(t){e.handleSubmit(t)}},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-name-input"},"Name"),o.a.createElement("input",{type:"text",id:"note-name-input",onChange:function(t){e.updateName(t)}}),o.a.createElement("p",{class:"form-error"},this.state&&this.state.errorMessages.name)),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-content-input"},"Content"),o.a.createElement("textarea",{id:"note-content-input",onChange:function(t){e.updateContent(t)}}),o.a.createElement("p",{class:"form-error"},this.state&&this.state.errorMessages.content)),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-folder-select"},"Folder"),o.a.createElement("select",{id:"note-folder-select",onChange:function(t){e.updateFolderId(t)}},o.a.createElement("option",{value:null},"..."),t.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)})),o.a.createElement("p",{class:"form-error"},this.state&&this.state.errorMessages.folderId)),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{type:"submit"},"Add note"))))}}]),t}(n.Component);V.defaultProps={folders:[]},V.contextType=O,V.state={formValid:!1,nameValid:!1,contentValid:!1,folderIdValid:!1,name:"",content:"",folderId:"",errorMessages:{}};var D=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(f.a)(this,Object(h.a)(t).call(this))).state={hasError:!1},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.hasError?o.a.createElement("div",null,o.a.createElement("h1",null,"You have encountered an error. "),o.a.createElement("h5",null,"\xaf\\(\u30c4)/\xaf Call 555-555-5555 if problem persists")):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),t}(o.a.Component),A=(a(213),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={notes:[],folders:[]},a.deleteNote=function(e){return fetch("http://localhost:9090/notes/".concat(e),{method:"DELETE"}).then(function(t){if(!t.ok)throw new Error("Error deleting note ".concat(e));return t.json()}).then(function(){fetch("http://localhost:9090/notes").then(function(e){if(!e.ok)throw new Error("Error retrieving notes list");return e.json()}).then(function(e){a.setState({notes:e})})}).catch(function(e){console.log(e)})},a.createNewFolder=function(e){console.log(e);fetch("http://localhost:9090/folders",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:e.folderName})}).then(function(e){if(!e.ok)throw console.log("Response not OK"),new Error("Failed to create new folder");return e.json()}).then(function(e){a.setState({folders:[e].concat(Object(d.a)(a.state.folders))})}).catch(function(e){console.log(e.message)})},a.createNewNote=function(e){e.modified=(new Date).toISOString(),fetch("http://localhost:9090/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw new Error("Failed to create new Note");return e.json()}).then(function(e){console.log(e),a.setState({notes:[e].concat(Object(d.a)(a.state.notes))})}).catch(function(e){throw console.log(e),e})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={},a=fetch("http://localhost:9090/folders").then(function(e){if(!e.ok)throw new Error("Error retrieving folders list");return e.json()}),n=fetch("http://localhost:9090/notes").then(function(e){if(!e.ok)throw new Error("Error retrieving notes list");return e.json()});Promise.all([a,n]).then(function(a){t.folders=a[0],t.notes=a[1],e.setState(t)}).catch(function(e){console.log(e)})}},{key:"renderNavRoutes",value:function(){var e=this.state,t=e.notes,a=e.folders;return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(O.Provider,{key:e,value:{folders:a,notes:t}},o.a.createElement(v.a,{exact:!0,key:e,path:e,component:w}))}),o.a.createElement(O.Provider,{key:"notePageNav",value:{folders:a,notes:t}},o.a.createElement(v.a,{path:"/note/:noteId",component:_})),o.a.createElement(v.a,{path:"/add-folder",component:_}),o.a.createElement(v.a,{path:"/add-note",component:_}))}},{key:"renderMainRoutes",value:function(){var e=this,t=this.state,a=t.notes,n=t.folders;return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(t){return o.a.createElement(M.Provider,{key:t,value:{folders:n,notes:a,onDeleteClick:e.deleteNote}},o.a.createElement(v.a,{exact:!0,key:t,path:t,component:P}))}),o.a.createElement(M.Provider,{key:"notePageMain",value:{folders:n,notes:a,onDeleteClick:this.deleteNote}},o.a.createElement(v.a,{path:"/note/:noteId",component:S})),o.a.createElement(O.Provider,{value:{createNewFolder:this.createNewFolder}},o.a.createElement(v.a,{path:"/add-folder",component:F})),o.a.createElement(O.Provider,{key:"addNote",value:{folders:n,createNewNote:this.createNewNote}},o.a.createElement(v.a,{path:"/add-note",component:V})))}},{key:"render",value:function(){return o.a.createElement(D,null,o.a.createElement("div",{className:"App"},o.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),o.a.createElement("header",{className:"App__header"},o.a.createElement("h1",null,o.a.createElement(N.a,{to:"/"},"Noteful")," ",o.a.createElement(E.a,{icon:"check-double"}))),o.a.createElement("main",{className:"App__main"},this.renderMainRoutes())))}}]),t}(n.Component));l.b.add(s.c,s.b,s.d,s.a),c.a.render(o.a.createElement(i.a,null,o.a.createElement(A,null)),document.getElementById("root"))},80:function(e,t,a){e.exports=a(215)},87:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},97:function(e,t,a){}},[[80,2,1]]]);
//# sourceMappingURL=main.dfaacf6a.chunk.js.map